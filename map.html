<!DOCTYPE html>

<html>
<head>
<title> The Marauder's Maaeeepp </title>

<meta charset="utf-8">
<link rel="stylesheet" href="style.css" type="text/css" />
<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=true">
      </script>

<script>
// geolocation


var crd;

function success(pos) {
   crd = pos.coords;

  console.log('Your current position is:');
  console.log('Latitude : ' + crd.latitude);
  console.log('Longitude: ' + crd.longitude);
  console.log('More or less ' + crd.accuracy + ' meters.');
};
navigator.geolocation.getCurrentPosition(success);


function initialize(pos) {
		crd = pos.coords;
        var mapOptions = {
          center: { lat: crd.latitude, lng: crd.longitude},
          zoom: 18
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        fillmap();

      }
      navigator.geolocation.getCurrentPosition(initialize);
      google.maps.event.addDomListener(window, 'load', initialize);
      

var requestInfo = "login=SnowWhite&lat="+crd.latitude+"&lng="+crd.longitude;


function fillmap() {
	xhr = new XMLHttpRequest();
	console.log("hi");
	xhr.open('POST', 'http://chickenofthesea.herokuapp.com/sendLocation', true);
	xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	console.log("bout ot send shit");
	xhr.send(requestInfo);
	xhr.onreadystatechange = function() {
	if(http.readyState == 4 && http.status == 200) {
	        alert("hey your readystatechangeworked");
			console.log("probs got data back");
		}
	object = JSON.parse(xhr.responseText);
	}
	console.log(xhr.responseText);
}

</script>



</head>

<body>
	<h1> the mordor's maep </h1>
	<div id="map-canvas"></div>
	

</body>


</html>