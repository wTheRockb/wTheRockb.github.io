<!DOCTYPE html>

<html>
<head>
<title> The Marauder's Maaeeepp </title>

<meta charset="utf-8">
<link rel="stylesheet" href="style.css" type="text/css" />
<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=true">
      </script>

<script>
// geolocation


var crd;
var myLatLng = new google.maps.LatLng(-42,72);

function success(pos) {
   crd = pos.coords;

  console.log('Your current position is:');
  console.log('Latitude : ' + crd.latitude);
  console.log('Longitude: ' + crd.longitude);
  console.log('More or less ' + crd.accuracy + ' meters.');
};
navigator.geolocation.getCurrentPosition(success);


function initialize(pos) {
		crd = pos.coords;
        var mapOptions = {
          center: { lat: crd.latitude, lng: crd.longitude},
          zoom: 18
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        fillmap();

      }
      navigator.geolocation.getCurrentPosition(initialize);
      google.maps.event.addDomListener(window, 'load', initialize);
      




function fillmap() {
	xhr = new XMLHttpRequest();
	requestInfo = "login=SnowWhite&lat=3&lng=4";
	xhr.open('POST', 'http://chickenofthesea.herokuapp.com/sendLocation', true);
	xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	
	xhr.send(requestInfo);
	xhr.onreadystatechange = function() {
	if(xhr.readyState == 4 && xhr.status == 200) {
	        alert("hey your readystatechangeworked");
			console.log("probs got data back");
		object = JSON.parse(xhr.responseText);
		
		}
	
	}
	makeMarkers();
	marker.setMap(map);
}

function makeMarkers(){
	var myLatLng = new google.maps.LatLng(-42,72);
	marker = new google.maps.Marker({
    position: myLatLng,
    map: map,
    title:"Hello World!"
});
	marker.setMap(map);
}
</script>



</head>

<body>
	<h1> the mordor's maep </h1>
	<div id="map-canvas"></div>
	

</body>


</html>